{"version":3,"file":"static/js/src_Components_jsx.b266b3cd.chunk.js","mappings":"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","sources":["CheckAllConfigInvisible.jsx","Components.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport BaseField from './BaseField';\n\nclass CheckAllConfigInvisible extends BaseField {\n    constructor(props) {\n        super(props);\n        this.storedAlive = this.props.alive;\n        this.storedChecked = false;\n    }\n\n    checkConfiguration() {\n        if (this.props.alive) {\n            this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`, 'getSystemInfo', null)\n                .then(async result => {\n                    let changed = false;\n                    if ((result?.systemOS === 'docker' && result.dockerDB === true) || result?.systemOS !== 'docker') {\n                        this.props.data._nonSupportDockerDB = false;\n                        changed = true;\n                    } else if (result?.systemOS === 'docker' && result.dockerDB === false) {\n                        this.props.data._nonSupportDockerDB = true;\n\n                        if (this.props.data.influxDBEnabled) {\n                            this.props.data.influxDBEnabled = false;\n                            changed = true;\n                        }\n                        if (this.props.data.mySqlEnabled) {\n                            this.props.data.mySqlEnabled = false;\n                            changed = true;\n                        }\n                        if (this.props.data.sqliteEnabled) {\n                            this.props.data.sqliteEnabled = false;\n                            changed = true;\n                        }\n                        if (this.props.data.pgSqlEnabled) {\n                            this.props.data.pgSqlEnabled = false;\n                            changed = true;\n                        }\n                        if (this.props.data.startAllRestore) {\n                            this.props.data.startAllRestore = false;\n                            changed = true;\n                        }\n\n                        changed && this.props.onChange(this.props.data);\n\n                        if (this.props.data.redisType !== 'remote' && this.props.data.redisEnabled) {\n                            this.props.data.redisType = 'remote';\n                            changed = true;\n                        }\n                        changed = true;\n                    }\n\n                    if (result?.systemOS === 'docker') {\n                        changed = true;\n                        this.props.data._restoreIfWait = 10000;\n                    } else if (result?.systemOS === 'win') {\n                        changed = true;\n                        this.props.data._restoreIfWait = 18000;\n                    }\n                    const CONFIGS = ['ccu', 'mySql', 'sqlite', 'pgSql', 'influxDB', 'history'];\n                    for (let c = 0; c < CONFIGS.length; c++) {\n                        if (!this.isConfigFilled(CONFIGS[c])) {\n                            const _result = await this.fetchConfig(CONFIGS[c], this.props.data)\n                                .catch(e => this.showError(e));\n                            changed = changed || _result.changed;\n                        }\n                    }\n                });\n\n            if (!this.props.data.cifsEnabled && !this.storedChecked) {\n                this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`, 'getFileSystemInfo', null)\n                    .then(result => {\n                        if (result?.diskState && result.storage && result.diskFree) {\n                            this.storedChecked = true;\n                            if (result.diskState === 'warn' && result.storage === 'local') {\n                                this.showMessage(I18n.t('On the host only %s MB free space is available! Please check your system!', result.diskFree), I18n.t('BackItUp Information!'));\n                            } else if (result.diskState === 'error' && result.storage === 'local') {\n                                this.showMessage(I18n.t('On the host only %s MB free space is available! Local backups are currently not possible. Please check your system!', result.diskFree), I18n.t('BackItUp Information!'), 'warning');\n                            }\n                        }\n                    });\n            }\n        }\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        if (this.storedAlive) {\n            this.checkConfiguration();\n        }\n    }\n\n    renderItem() {\n        if (this.storedAlive !== this.props.alive) {\n            this.storedAlive = this.props.alive;\n            if (this.storedAlive) {\n                this.checkConfiguration();\n            }\n        }\n\n        return this.renderMessage();\n    }\n}\n\nCheckAllConfigInvisible.propTypes = {\n    socket: PropTypes.object.isRequired,\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    data: PropTypes.object.isRequired,\n    attr: PropTypes.string,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n};\n\nexport default CheckAllConfigInvisible;\n","import AdapterExist from './AdapterExist';\nimport BackupNow from './BackupNow';\nimport DetectConfig from './DetectConfig';\nimport CheckConfigInvisible from './CheckConfigInvisible';\nimport GoogleDrive from './GoogleDrive';\nimport Onedrive from './Onedrive';\nimport Dropbox from './Dropbox';\nimport Instance from './Instance';\nimport RestoreBackup from './RestoreBackup';\nimport CheckAllConfigInvisible from './CheckAllConfigInvisible';\n\nexport default {\n    AdapterExist,\n    BackupNow,\n    DetectConfig,\n    GoogleDrive,\n    Onedrive,\n    Dropbox,\n    CheckConfigInvisible,\n    Instance,\n    RestoreBackup,\n    CheckAllConfigInvisible,\n};\n"],"names":["CheckAllConfigInvisible","BaseField","props","result","changed","CONFIGS","c","_result","e"],"sourceRoot":""}